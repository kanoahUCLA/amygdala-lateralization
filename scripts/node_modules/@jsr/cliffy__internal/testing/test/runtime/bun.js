import { createTestFunction } from "../create_test_function.js";
const bunTestMod = await import("bun:test" + "");
const bunTest = "default" in bunTestMod ? bunTestMod.default.test : bunTestMod.test;
export function createBunTestFunction() {
  return createTestFunction((opts)=>{
    createBunTestInnerFunction(opts);
  });
}
function createBunTestInnerFunction({ name, fn, only, ignore }) {
  const skip = Array.isArray(ignore) ? ignore.includes("bun") : ignore;
  if (only) {
    bunTest.only(name, createBunTestFn(fn));
  } else if (skip) {
    bunTest.skip(name, createBunTestFn(fn));
    return true;
  } else {
    bunTest(name, createBunTestFn(fn));
  }
  return false;
}
function createBunTestFn(fn) {
  return ()=>{
    fn({
      step: createTestFunction((opts)=>Promise.resolve(createBunTestInnerFunction(opts)))
    });
  };
}
//# sourceMappingURL=bun.js.map