import { dim } from "@jsr/std__fmt/colors";
import { NodeRuntime } from "./node_runtime.js";
export class BunRuntime extends NodeRuntime {
  async execute(cmdArgs, isJsr, logger) {
    // deno-lint-ignore no-explicit-any
    const Bun = globalThis.Bun;
    // deno-lint-ignore no-explicit-any
    const process = globalThis.process;
    cmdArgs = isJsr ? [
      `${process.execPath}x`,
      "jsr",
      ...cmdArgs
    ] : [
      process.execPath,
      ...cmdArgs
    ];
    logger?.log(dim("$ %s"), cmdArgs.join(" "));
    const proc = Bun.spawn(cmdArgs, {
      stdout: "pipe",
      stderr: "pipe"
    });
    await proc.exited;
    if (proc.exitCode) {
      const stderr = await new Response(proc.stderr).text();
      throw new Error(stderr.trim());
    }
  }
}
//# sourceMappingURL=bun_runtime.js.map