// import type { TestContext as NodeTestContext } from "node:test";
import { test as nodeTest } from "node:test";
import { createTestFunction } from "../create_test_function.js";
export function createNodeTestFunction() {
  return createTestFunction(({ name, fn, only, ignore })=>nodeTest(name, {
      only,
      skip: Array.isArray(ignore) ? ignore.includes("node") : ignore
    }, createNodeTestFn(fn)));
}
function createNodeTestFn(fn) {
  return (ctx)=>fn({
      ...ctx,
      step: createTestFunction(async ({ name, ignore, fn: stepFn })=>{
        const skip = Array.isArray(ignore) ? ignore.includes("deno") : ignore === true;
        await ctx.test(name, {
          skip
        }, createNodeTestFn(stepFn));
        return skip;
      })
    });
}
//# sourceMappingURL=node.js.map