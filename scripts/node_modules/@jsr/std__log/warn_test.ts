// Copyright 2018-2025 the Deno authors. MIT license.
import { assertEquals } from "jsr:@std/assert@^1.0.11";
import { assertSpyCall, spy } from "jsr:@std/testing@^1.0.9/mock";
import { yellow } from "jsr:@std/fmt@^1.0.5/colors";
import { warn } from "./warn.ts";

Deno.test("warn()", () => {
  using consoleInfoSpy = spy(console, "log");
  const sym = Symbol("a");
  const warnData: symbol = warn(sym);
  const warnResolver: null | undefined = warn(() => null);
  assertEquals(warnData, sym);
  assertEquals(warnResolver, null);
  assertSpyCall(consoleInfoSpy, 0, {
    args: [yellow("WARN Symbol(a)")],
  });
  assertSpyCall(consoleInfoSpy, 1, {
    args: [yellow("WARN null")],
  });
});
